# AI Agent Replication Prompt: Professional CMS Portfolio with Eleventy

This document contains a comprehensive prompt for an AI agent to replicate the entire Professional CMS Portfolio system built with Eleventy, Netlify CMS, and automated blog deployment.

---

## MASTER PROMPT

Build a Professional CMS for a software developer portfolio using Eleventy with the following complete architecture and features:

### PROJECT STRUCTURE

Create an Eleventy v3.1.2 project with this structure:
```
www/
├── .github/
│   └── workflows/
│       └── update-blog-submodule.yml
├── eleventy.config.js
├── package.json
├── netlify.toml
├── site.config.json
├── src/
│   ├── admin.njk
│   ├── admin.js
│   ├── blog.njk
│   ├── content-admin.njk
│   ├── content-admin.js
│   ├── index.njk
│   ├── projects.njk
│   ├── style.css
│   ├── work-with-me.njk
│   ├── _layouts/
│   │   ├── article.njk
│   │   ├── base.njk
│   │   ├── blog-cta.njk
│   │   ├── footer.njk
│   │   ├── header.njk
│   │   ├── logo.njk
│   │   ├── newsletter.njk
│   │   └── trueman.njk
│   ├── _templates/
│   │   ├── blog-post-template.md
│   │   ├── project-template.md
│   │   └── README.md
│   ├── blog/ (git submodule from separate repository)
│   │   ├── .github/
│   │   │   └── workflows/
│   │   │       └── notify-main-repo.yml
│   │   └── *.md (blog posts)
│   ├── blog_main/ (main repo blog folder for CMS)
│   │   └── *.md (CMS-editable blog posts)
│   ├── cms/
│   │   ├── index.html
│   │   └── config.yml
│   └── projects/
│       └── *.md (project files)
└── public/ (generated by Eleventy)
```

### PHASE 1: ELEVENTY CONFIGURATION

**File: `package.json`**
```json
{
  "name": "lenielluzardo-portfolio",
  "version": "1.0.0",
  "scripts": {
    "start": "eleventy --serve",
    "build": "eleventy"
  },
  "dependencies": {
    "@11ty/eleventy": "^3.1.2",
    "decap-cms-app": "^3.0.0",
    "netlify-identity-widget": "^1.9.2"
  }
}
```

**File: `eleventy.config.js`**

Create comprehensive Eleventy configuration with:

1. **Collections**: 
   - `posts`: Read from BOTH `src/blog/` (submodule) AND `src/blog_main/` (main repo)
   - `allPosts`: Combined sorted posts from both folders
   - `projects`: From `src/projects/`
   - `postsByTag`: Group posts by tags
   - `allTags`: Extract unique tags

2. **Filters**:
   - `dateDisplay`: Format dates (MMMM DD, YYYY)
   - `excerpt`: Extract first 160 characters
   - `readingTime`: Calculate reading time from content
   - `limit`: Limit array items
   - `where`: Filter arrays by property

3. **Passthrough Copy**:
   - `src/style.css` → `/style.css`
   - `src/admin.js` → `/admin.js`
   - `src/content-admin.js` → `/content-admin.js`
   - `src/_templates/` → `/_templates/`
   - `src/assets/` → `/assets/`

4. **Global Data**:
   - Add `site` global data from `site.config.json`

5. **Draft Filtering**:
   - Check `site.config.json` for draft posts to exclude
   - Filter from all collections

6. **Directory Configuration**:
   - Input: `src`
   - Output: `public`
   - Includes: `src/_includes` → `_layouts`

### PHASE 2: SITE CONFIGURATION

**File: `site.config.json`**

Create feature flag system:
```json
{
  "features": {
    "blogCTA": {
      "enabled": true,
      "title": "Need Help with Your Project?",
      "description": "If you're looking for a developer to help bring your ideas to life, let's talk.",
      "buttonText": "Work with Me",
      "buttonLink": "/work-with-me"
    },
    "newsletter": {
      "enabled": true,
      "title": "Stay Updated",
      "description": "Get notified when I publish new articles about web development and software engineering.",
      "placeholder": "your@email.com",
      "buttonText": "Subscribe"
    },
    "recentPosts": {
      "enabled": true,
      "showOnHomepage": true,
      "limit": 3
    },
    "recentProjects": {
      "enabled": true,
      "showOnHomepage": true,
      "limit": 3
    },
    "workWithMePage": {
      "enabled": true
    },
    "blogCategories": {
      "enabled": true
    }
  },
  "contact": {
    "email": "lenielluzardo.dev@gmail.com",
    "linkedin": "https://www.linkedin.com/in/lenielluzardo",
    "github": "https://github.com/lenielluzardo"
  },
  "newsletter": {
    "provider": "custom",
    "actionUrl": "/api/newsletter"
  },
  "content": {
    "drafts": [],
    "hiddenProjects": []
  }
}
```

### PHASE 3: CSS DESIGN SYSTEM

**File: `src/style.css`**

Create comprehensive CSS (1000+ lines) with:

1. **CSS Variables** (`:root`):
   - Colors: primary, accent, text, background, card-bg, border
   - Spacing: xs (4px) → 3xl (96px)
   - Typography: xs (0.75rem) → 4xl (2.5rem)
   - Max-widths: sm, md, lg
   - Border radius, transitions, shadows

2. **Dark Mode** (`@media (prefers-color-scheme: dark)`):
   - Override all color variables for dark theme
   - Maintain accessibility contrast ratios

3. **Base Styles**:
   - Reset and normalize
   - Typography hierarchy
   - Link states with smooth transitions

4. **Layout Components**:
   - Header with navigation (sticky optional)
   - Logo with custom styling
   - Footer
   - Main content container

5. **Card System**:
   - `.card` with hover effects
   - Grid layouts with `auto-fill`
   - Overflow prevention: `word-wrap: break-word`, `overflow-wrap: break-word`
   - Tags system with flex wrap

6. **Hero Section**:
   - Large typography
   - CTA buttons
   - Gradient backgrounds

7. **Blog & Projects**:
   - Article layouts
   - Post metadata
   - Tag filtering
   - Reading time display

8. **Admin Dashboard**:
   - Feature toggle interface
   - Control panel grid
   - Switch components
   - Modal dialogs for content management

9. **Work with Me Page**:
   - `.work-hero` with gradient background
   - `.benefits-grid` with 6 benefit cards
   - `.service-item` for detailed services
   - `.process-steps` with numbered list
   - `.faq-item` for Q&A
   - `.contact-options` with CTA buttons
   - All with proper overflow handling

10. **Responsive Design** (`@media (max-width: 768px)`):
    - Mobile-first approach
    - Stack grids to single column
    - Adjust typography sizes
    - Flexible navigation

### PHASE 4: LAYOUT TEMPLATES

**File: `src/_layouts/base.njk`**

Create base template with:
- HTML boilerplate with meta tags
- OpenGraph tags for social sharing
- Link to `style.css`
- Netlify Identity Widget script: `https://identity.netlify.com/v1/netlify-identity-widget.js`
- Identity initialization script
- Include header, main content block, footer
- Pass `site` data to all templates

**File: `src/_layouts/header.njk`**

Header with:
- Logo include
- Navigation with conditional links:
  - Home (always)
  - Blog (always)
  - Projects (if `site.features.recentProjects.enabled`)
  - Work with Me (if `site.features.workWithMePage.enabled`)

**File: `src/_layouts/footer.njk`**

Footer with:
- Copyright info
- Social links (email, LinkedIn, GitHub)
- Links to admin sections

**File: `src/_layouts/logo.njk`**

Animated logo:
```html
<div id="logo">
  <span id="l1" class="ll">L</span>
  <span id="l2" class="ll">L</span>
</div>
```

**File: `src/_layouts/article.njk`**

Article layout extending base:
- Header with title, date, reading time, tags
- Article content
- Conditional blog CTA component
- Conditional newsletter component

**File: `src/_layouts/blog-cta.njk`**

Conditional CTA component:
- Check `site.features.blogCTA.enabled`
- Display customizable title, description, button

**File: `src/_layouts/newsletter.njk`**

Newsletter subscription form:
- Check `site.features.newsletter.enabled`
- Email input with validation
- Submit button
- Use `site.newsletter.actionUrl`

**File: `src/_layouts/trueman.njk`**

(If needed for special layouts)

### PHASE 5: PAGE TEMPLATES

**File: `src/index.njk`**

Homepage with:
- Hero section with introduction
- Services section
- Recent posts (if enabled, limited by config)
- Recent projects (if enabled, limited by config)
- Newsletter signup (if enabled)

**File: `src/blog.njk`**

Blog listing:
- All published posts from both `blog/` and `blog_main/`
- Sorted by date descending
- Tag filtering (if enabled)
- Post cards with excerpt, date, tags

**File: `src/projects.njk`**

Projects portfolio:
- All projects from `src/projects/`
- Exclude hidden projects
- Project cards with description, tech stack, links

**File: `src/work-with-me.njk`**

Comprehensive services page with:
- Work hero section with value proposition
- Benefits grid (6 cards: Fast Delivery, Professional Process, Full-Stack Expertise, Collaborative Approach, Quality Assured, Ongoing Support)
- Services detailed (4 services: Strategic Planning & Consulting, UI/UX Design, Full-Stack Development, Deployment & DevOps)
- Process section (6 steps: Initial Consultation, Discovery & Planning, Proposal & Agreement, Development Sprints, Testing & Refinement, Launch & Support)
- Pricing section with ranges
- CTA contact section with email/LinkedIn buttons
- FAQ section (5 questions)

### PHASE 6: ADMIN DASHBOARD

**File: `src/admin.njk`**

Feature configuration dashboard:
- Extends base layout
- Authentication check with Netlify Identity
- Hide content if not authenticated, show login prompt
- Feature grid with toggle switches for:
  - Blog CTA
  - Newsletter
  - Recent Posts
  - Recent Projects
  - Work with Me Page
  - Blog Categories
- Each feature shows current state from `site.config.json`
- Toggle switches that update config via admin.js

**File: `src/admin.js`**

JavaScript for feature management:
```javascript
// Load current config
// Toggle feature on/off
// Update site.config.json via fetch API
// Show success/error notifications
// Handle authentication state
```

### PHASE 7: CONTENT MANAGEMENT SYSTEM

**File: `src/content-admin.njk`**

Local content management interface:
- Authentication check
- Tabs for Blog Posts and Projects
- List all content with edit/delete buttons
- Modal for creating new content
- Preview functionality

**File: `src/content-admin.js`**

JavaScript for content CRUD:
```javascript
// List blog posts and projects
// Create new content from templates
// Edit existing content
// Disable content (add to drafts)
// Delete content
// Use templates from _templates/
```

### PHASE 8: NETLIFY CMS INTEGRATION

**File: `src/cms/index.html`**

CMS entry point:
```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Content Manager</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/cms/";
          });
        }
      });
    }
  </script>
</body>
</html>
```

**File: `src/cms/config.yml`**

Netlify CMS configuration:
```yaml
backend:
  name: git-gateway
  branch: main

media_folder: "www/src/assets"
public_folder: "/assets"

collections:
  - name: "blog"
    label: "Blog Posts"
    folder: "www/src/blog_main"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Description", name: "description", widget: "text"}
      - {label: "Date", name: "date", widget: "datetime"}
      - {label: "Tags", name: "tags", widget: "list"}
      - {label: "Body", name: "body", widget: "markdown"}
      - {label: "Draft", name: "draft", widget: "boolean", default: false}

  - name: "projects"
    label: "Projects"
    folder: "www/src/projects"
    create: true
    slug: "{{slug}}"
    fields:
      - {label: "Title", name: "title", widget: "string"}
      - {label: "Description", name: "description", widget: "text"}
      - {label: "Tech Stack", name: "tech", widget: "list"}
      - {label: "Body", name: "body", widget: "markdown"}
      - {label: "Project URL", name: "url", widget: "string", required: false}
      - {label: "GitHub URL", name: "github", widget: "string", required: false}
```

**IMPORTANT**: Use `git-gateway` backend, NOT `github` backend, because submodules aren't accessible with git-gateway.

### PHASE 9: CONTENT TEMPLATES

**File: `src/_templates/blog-post-template.md`**

Blog post template with:
- Frontmatter: title, description, date, tags, draft
- Structured markdown sections: Introduction, Main Content, Code Examples, Conclusion

**File: `src/_templates/project-template.md`**

Project template with:
- Frontmatter: title, description, tech, url, github
- Sections: Overview, Features, Technologies, Implementation, Results

**File: `src/_templates/README.md`**

Documentation for using templates

### PHASE 10: GIT SUBMODULES & DUAL BLOG SYSTEM

**Setup Blog Submodule**:

1. Create separate repository for blog content (e.g., `ll.db.blog`)
2. Add as submodule:
   ```bash
   git submodule add https://github.com/username/ll.db.blog.git www/src/blog
   ```
3. Create `.gitmodules` file automatically

**Create Dual Blog Folder System**:

1. `www/src/blog/` - Git submodule (read-only for CMS, managed via GitHub)
2. `www/src/blog_main/` - Main repo folder (writable by Netlify CMS)

**Why Dual System?**:
- Netlify CMS with git-gateway backend cannot access git submodules
- Submodule allows managing blog content in separate repository
- Main folder allows CMS editing
- Eleventy reads from BOTH folders

**Eleventy Config for Dual Blogs**:
```javascript
// Collections must combine both sources
eleventyConfig.addCollection("posts", function(collectionApi) {
  const blogPosts = collectionApi.getFilteredByGlob("src/blog/*.md");
  const blogMainPosts = collectionApi.getFilteredByGlob("src/blog_main/*.md");
  return [...blogPosts, ...blogMainPosts].sort((a, b) => b.date - a.date);
});
```

### PHASE 11: NETLIFY CONFIGURATION

**File: `netlify.toml`**

```toml
[build]
  command = "npm run build"
  publish = "www/public"

[build.processing]
  skip_processing = false
  
[build.environment]
  NODE_VERSION = "20"

# Enable git submodules
[build.processing.git]
  git_submodules = true

# Redirect rules for admin sections
[[redirects]]
  from = "/admin/*"
  to = "/admin/:splat"
  status = 200
  force = true
  conditions = {Role = ["admin"]}

[[redirects]]
  from = "/admin/cms/*"
  to = "/admin/cms/:splat"
  status = 200
  force = false
```

**Netlify Setup Steps**:

1. Connect GitHub repository to Netlify
2. Set build command: `npm run build`
3. Set publish directory: `www/public`
4. Enable Identity:
   - Go to Site Settings → Identity
   - Click "Enable Identity"
   - Enable Git Gateway
5. Add admin user:
   - Identity tab → Invite users
   - Set admin role
6. Configure registration:
   - Settings → Identity → Registration: Invite only
7. Enable Git Gateway:
   - Settings → Identity → Services → Git Gateway: Enable

### PHASE 12: AUTHENTICATION

**Netlify Identity Integration**:

1. Add script to base layout:
   ```html
   <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
   ```

2. Initialize Identity:
   ```html
   <script>
     if (window.netlifyIdentity) {
       window.netlifyIdentity.on("init", user => {
         if (!user) {
           window.netlifyIdentity.on("login", () => {
             document.location.href = "/admin/";
           });
         }
       });
     }
   </script>
   ```

3. Protect admin pages:
   ```html
   <div id="admin-content" style="display: none;">
     <!-- Admin content here -->
   </div>
   <div id="login-prompt">
     <p>Please log in to access this page.</p>
     <button onclick="netlifyIdentity.open()">Log In</button>
   </div>
   <script>
     if (window.netlifyIdentity) {
       netlifyIdentity.on('init', user => {
         if (user) {
           document.getElementById('admin-content').style.display = 'block';
           document.getElementById('login-prompt').style.display = 'none';
         }
       });
     }
   </script>
   ```

### PHASE 13: AUTOMATED BLOG DEPLOYMENT

**Problem**: When blog posts are added to the submodule repository (ll.db.blog), the main repository needs to update its submodule reference to trigger a new deployment.

**Solution**: GitHub Actions workflows

**File: `.github/workflows/update-blog-submodule.yml` (Main Repository)**

```yaml
name: Update Blog Submodule

on:
  repository_dispatch:
    types: [blog-updated]
  workflow_dispatch:

jobs:
  update-submodule:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          submodules: true
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Update blog submodule
        run: |
          cd www/src/blog
          git fetch origin
          git checkout main
          git pull origin main
          cd ../../..

      - name: Check for changes
        id: check_changes
        run: |
          if git diff --quiet www/src/blog; then
            echo "has_changes=false" >> $GITHUB_OUTPUT
          else
            echo "has_changes=true" >> $GITHUB_OUTPUT
          fi

      - name: Commit submodule update
        if: steps.check_changes.outputs.has_changes == 'true'
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add www/src/blog
          git commit -m "chore: update blog submodule to latest [skip ci]"
          git push
```

**File: `www/src/blog/.github/workflows/notify-main-repo.yml` (Blog Repository)**

```yaml
name: Notify Main Repo of Blog Updates

on:
  push:
    branches:
      - main
    paths:
      - '**.md'
      - '!README.md'

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger main repo workflow
        run: |
          curl -X POST \
            -H "Accept: application/vnd.github.v3+json" \
            -H "Authorization: token ${{ secrets.DISPATCH_TOKEN }}" \
            https://api.github.com/repos/USERNAME/MAIN_REPO/dispatches \
            -d '{"event_type":"blog-updated"}'
```

**Setup GitHub Token**:

1. Go to GitHub Settings → Developer settings → Personal access tokens → Tokens (classic)
2. Generate new token with scopes: `repo`, `workflow`
3. Copy token
4. Add to blog repository:
   - Repository Settings → Secrets and variables → Actions
   - New repository secret
   - Name: `DISPATCH_TOKEN`
   - Value: (paste token)

**Workflow Explanation**:
1. User pushes blog post to blog repository
2. Blog repo workflow triggers
3. Sends `repository_dispatch` event to main repo
4. Main repo workflow activates
5. Updates submodule reference to latest commit
6. Commits and pushes change (with `[skip ci]` to prevent loop)
7. Netlify detects commit and rebuilds site
8. New blog post appears on live site

### PHASE 14: DOCUMENTATION

Create these documentation files:

**File: `www/README.md`**
- Project overview
- Getting started
- Development workflow
- Deployment instructions

**File: `www/NETLIFY_CMS_SETUP.md`**
- Netlify Identity setup
- Git Gateway configuration
- CMS access instructions
- User management

**File: `www/QUICKSTART_CMS.md`**
- Quick guide for content editors
- Creating blog posts
- Managing projects
- Using feature toggles

**File: `www/BLOG_WORKFLOW.md`**
- Dual blog folder explanation
- When to use blog vs blog_main
- Submodule management
- Content templates

**File: `www/AUTOMATED_BLOG_DEPLOYMENT.md`**
- Workflow architecture
- Setup instructions
- Token generation
- Testing procedures
- Troubleshooting

### PHASE 15: BUILD & DEPLOYMENT

**Development Workflow**:
```bash
npm install
npm start  # Dev server at http://localhost:8080
```

**Build Process**:
```bash
npm run build  # Generates www/public/
```

**Git Workflow**:
```bash
# Commit changes
git add .
git commit -m "descriptive message"
git push origin main

# Netlify auto-deploys on push to main
```

**Submodule Updates** (Manual):
```bash
cd www/src/blog
git pull origin main
cd ../../..
git add www/src/blog
git commit -m "chore: update blog submodule"
git push origin main
```

**Submodule Updates** (Automated):
- Handled by GitHub Actions workflows
- Automatic on blog repo pushes

### PHASE 16: FINAL TOUCHES

**CSS Overflow Prevention**:
- All cards have `overflow: hidden`
- All text elements have `word-wrap: break-word`, `overflow-wrap: break-word`, `word-break: break-word`
- Tags have `max-width: 100%`
- Responsive breakpoints adjust for mobile

**Performance Optimizations**:
- CSS variables for consistent theming
- Minimal JavaScript (only for admin features)
- Static site generation for fast loading
- Efficient grid layouts

**Accessibility**:
- Semantic HTML
- ARIA labels where needed
- Keyboard navigation support
- Color contrast ratios

**SEO**:
- Meta descriptions on all pages
- OpenGraph tags for social sharing
- Semantic heading hierarchy
- Clean URLs

### SUCCESS CRITERIA

The system is complete when:

1. ✅ Eleventy builds without errors
2. ✅ All pages render correctly (Home, Blog, Projects, Work with Me, Admin)
3. ✅ Navigation shows conditional links based on feature flags
4. ✅ CSS design system works in light and dark mode
5. ✅ Text never overflows cards or containers
6. ✅ Admin dashboard allows toggling features
7. ✅ Content admin allows creating/editing content
8. ✅ Netlify CMS (/admin/cms/) loads and can edit blog_main posts
9. ✅ Authentication protects admin sections
10. ✅ Git submodule is properly configured
11. ✅ Dual blog folder system reads from both sources
12. ✅ GitHub Actions workflows are configured and functional
13. ✅ Site deploys to Netlify automatically
14. ✅ New blog posts in submodule trigger automatic deployment
15. ✅ All documentation is complete and accurate

### TESTING CHECKLIST

- [ ] Run `npm install` successfully
- [ ] Run `npm start` and access http://localhost:8080
- [ ] Navigate to all pages via menu
- [ ] Create a blog post via local admin
- [ ] Create a blog post via Netlify CMS
- [ ] Toggle features in admin dashboard
- [ ] Verify authentication on admin pages
- [ ] Check responsive design on mobile
- [ ] Test dark mode
- [ ] Verify no text overflow on any cards
- [ ] Push to GitHub and verify Netlify deployment
- [ ] Add blog post to submodule repo and verify automated workflow
- [ ] Test all documentation procedures

### ADDITIONAL NOTES

**Technology Stack**:
- Eleventy 3.1.2 (Static Site Generator)
- Nunjucks (Templating)
- Vanilla CSS (No frameworks)
- Vanilla JavaScript (Minimal, only for admin)
- Netlify (Hosting & Identity)
- Decap CMS 3.0.0 (Content Management)
- GitHub Actions (CI/CD)

**Key Design Decisions**:
- Mobile-first responsive design
- Feature flag system for easy toggling
- Dual blog folder to work around submodule limitations
- Git-gateway backend for CMS (required for write access)
- Separate submodule for blog portability
- Automated workflows for seamless content updates

**Maintenance**:
- Update dependencies regularly
- Monitor GitHub Actions workflow runs
- Renew GitHub tokens before expiration
- Review Netlify build logs for issues
- Keep documentation synchronized with changes

---

## END OF PROMPT

This comprehensive prompt should enable any AI agent to replicate the entire Professional CMS Portfolio system with all features, configurations, and automation workflows.
